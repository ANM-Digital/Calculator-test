<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculator</title>
  <link rel="stylesheet" href="calculator.css" />
  <link rel="stylesheet" href="footer/footer.css" />
</head>
<body>
  <div class="calculator" id="basic-calculator">
    <h2>Simple Calculator</h2>

    <div class="toggles">
      <label><input type="checkbox" id="toggleDark" /> Dark Mode</label>
    </div>

    <input type="text" class="calculator-screen" id="result" placeholder="0" aria-label="Calculator Screen" />

    <div class="calculator-buttons" id="buttons"></div>

    <button class="special-btn" id="lastCalcBtn" aria-label="Last Calculation">Last Calculation</button>
  </div>

  <footer>
    <div class="calculator-toggle">
      <button onclick="window.location.href='index.html'">Simple Calculator</button>
      <button onclick="window.location.href='advanced/advanced.html'">Advanced Calculator</button>
    </div>
  </footer>

  <!-- Scripts -->
  <script type="module">
    import mathLib from './mathLib.js';

    const buttonsContainer = document.getElementById('buttons');
    const result = document.getElementById('result');
    const toggleDark = document.getElementById('toggleDark');
    const lastCalcBtn = document.getElementById('lastCalcBtn');

    const layout = [
      ['C', 'ANS', '+-', '%'],
      ['7', '8', '9', '÷'],
      ['4', '5', '6', '×'],
      ['1', '2', '3', '-'],
      ['0', '.', '=', '+'],
      ['<']
    ];

    let lastCalculations = [];
    let lastCalcIndex = -1;
    let firstValue = null;

    function renderButtons() {
      buttonsContainer.innerHTML = '';
      layout.forEach(row => {
        row.forEach(btn => {
          const button = document.createElement('button');
          button.textContent = btn;
          button.onclick = () => handleButton(btn);

          if (btn === 'C') {
            button.classList.add('clear-btn');
          } else if (['ANS', '+-', '%', '<'].includes(btn)) {
            button.classList.add('special-btn');
          } else if (['÷', '×', '-', '+', '='].includes(btn)) {
            button.classList.add('orange');
          }

          buttonsContainer.appendChild(button);
        });
      });
    }

    function handleButton(value) {
      if (value === '=') {
        calculate();
      } else if (value === '<') {
        showPreviousCalculation();
